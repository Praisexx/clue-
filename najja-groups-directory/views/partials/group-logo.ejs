<% 
// Reusable group logo component
// Usage: <%- include('partials/group-logo', { group: group, size: '60px' }) %>

var logoPath;
var logoSize = typeof size !== 'undefined' ? size : '60px';
var borderRadius = logoSize === '100px' ? '12px' : '8px';
var fallbackFontSize = logoSize === '100px' ? '2rem' : '1.2rem';

// Priority 1: User uploaded image
if (group.logo_url && group.logo_url.trim()) {
    logoPath = group.logo_url;
} else {
    // Priority 2: Fallback to themed stock photos
    var logoNum = ((parseInt(group.id) % 5) + 1);
    
    if (group.name && (group.name.includes('Church') || group.name.includes('Christian') || group.name.includes('Christ') || group.name.includes('Redeemed') || group.name.includes('Living Faith') || group.name.includes('Mountain of Fire'))) {
        // Church photos - spiritual/architectural themes
        var churchPhotos = [
            'https://picsum.photos/id/75/400/400',   // Architecture/building
            'https://picsum.photos/id/582/400/400',  // Interior/peaceful
            'https://picsum.photos/id/665/400/400',  // Light/spiritual
            'https://picsum.photos/id/127/400/400',  // Gothic architecture
            'https://picsum.photos/id/250/400/400'   // Serene/contemplative
        ];
        logoPath = churchPhotos[logoNum - 1];
    } else if (group.name && (group.name.includes('University') || group.name.includes('Alumni') || group.name.includes('College') || group.name.includes('School'))) {
        // School photos - educational/academic themes
        var schoolPhotos = [
            'https://picsum.photos/id/159/400/400',  // Books/study
            'https://picsum.photos/id/175/400/400',  // Library/learning
            'https://picsum.photos/id/324/400/400',  // Academic building
            'https://picsum.photos/id/590/400/400',  // Graduation/achievement
            'https://picsum.photos/id/1/400/400'     // Classic academic
        ];
        logoPath = schoolPhotos[logoNum - 1];
    } else {
        // Organization photos - community/business themes
        var orgPhotos = [
            'https://picsum.photos/id/3/400/400',    // Professional/business
            'https://picsum.photos/id/7/400/400',    // Group/community
            'https://picsum.photos/id/15/400/400',   // Collaboration
            'https://picsum.photos/id/25/400/400',   // Modern/corporate
            'https://picsum.photos/id/29/400/400'    // People/networking
        ];
        logoPath = orgPhotos[logoNum - 1];
    }
}
%>
<div class="group-card__logo">
    <img src="<%= logoPath %>" 
         alt="<%= group.name %> logo" 
         style="width: <%= logoSize %>; height: <%= logoSize %>; border-radius: <%= borderRadius %>; object-fit: cover; <%= logoSize === '100px' ? 'border: 2px solid #e5e7eb; flex-shrink: 0;' : '' %>" 
         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
    <div style="width: <%= logoSize %>; height: <%= logoSize %>; border-radius: <%= borderRadius %>; background: var(--gradient-accent); display: none; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: <%= fallbackFontSize %>; <%= logoSize === '100px' ? 'border: 2px solid #e5e7eb; flex-shrink: 0;' : '' %>">
        <%= group.name ? group.name.charAt(0).toUpperCase() : 'G' %>
    </div>
</div>