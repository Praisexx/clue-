<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head') %>
    
    <!-- Structured Data - Website and Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Naija Groups Directory",
        "url": "<%= process.env.SITE_URL || 'http://localhost:3000' %>",
        "description": "The ultimate directory for Nigerian diaspora communities worldwide. Connect with cultural groups, churches, associations, and organizations.",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "<%= process.env.SITE_URL || 'http://localhost:3000' %>/search?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Naija Groups Directory",
            "url": "<%= process.env.SITE_URL || 'http://localhost:3000' %>",
            "description": "Connecting Nigerian diaspora communities worldwide",
            "contactPoint": {
                "@type": "ContactPoint",
                "contactType": "Customer Service",
                "url": "<%= process.env.SITE_URL || 'http://localhost:3000' %>/contact"
            }
        }
    }
    </script>
    
    <!-- Organization Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Naija Groups Directory",
        "url": "<%= process.env.SITE_URL || 'http://localhost:3000' %>",
        "description": "The ultimate directory for Nigerian diaspora communities worldwide",
        "foundingDate": "2024",
        "keywords": "Nigerian diaspora, Nigerian communities, cultural groups, churches, associations, organizations, Nigeria, diaspora directory",
        "serviceArea": {
            "@type": "Place",
            "name": "Worldwide"
        },
        "areaServed": "Worldwide",
        "knowsAbout": [
            "Nigerian Diaspora Communities",
            "Cultural Organizations",
            "Religious Groups",
            "Professional Associations",
            "Student Organizations",
            "Community Groups"
        ]
    }
    </script>
    
    <!-- BreadcrumbList for Homepage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "<%= process.env.SITE_URL || 'http://localhost:3000' %>"
            }
        ]
    }
    </script>
    
    <!-- Enhanced Meta Tags -->
    <meta name="description" content="Connect with Nigerian diaspora communities worldwide. Find cultural groups, churches, associations, and organizations in your area. Join the largest directory of Nigerian communities globally.">
    <meta name="keywords" content="Nigerian diaspora, Nigerian communities, cultural groups, churches, associations, organizations, Nigeria, community directory, diaspora groups">
    <meta property="og:title" content="Naija Groups Directory - Connect with Nigerian Communities Worldwide">
    <meta property="og:description" content="The ultimate directory for Nigerian diaspora communities. Find and connect with cultural groups, churches, and associations near you.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= process.env.SITE_URL || 'http://localhost:3000' %>">
    <meta property="og:site_name" content="Naija Groups Directory">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Naija Groups Directory - Nigerian Communities Worldwide">
    <meta name="twitter:description" content="Connect with Nigerian diaspora communities globally. Find cultural groups, churches, and associations in your area.">
    
    <link rel="canonical" href="<%= process.env.SITE_URL || 'http://localhost:3000' %>">
</head>
<body>
    <%- include('partials/header') %>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="hero__title">Connect with Nigerian Communities Worldwide</h1>
            <p class="hero__subtitle">Find cultural groups, churches, associations, and more in the diaspora.</p>
            
        </div>
    </section>

    <main class="container">
        <!-- Stats Section -->
        <section class="section">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="metric-card fade-in">
                    <div class="metric-card__number">150+</div>
                    <div class="metric-card__label">Active Groups</div>
                </div>
                <div class="metric-card fade-in">
                    <div class="metric-card__number">25</div>
                    <div class="metric-card__label">Countries</div>
                </div>
                <div class="metric-card fade-in">
                    <div class="metric-card__number">10K+</div>
                    <div class="metric-card__label">Community Members</div>
                </div>
            </div>
        </section>

        <!-- Featured Groups Section -->
        <section class="section accent-flag">
            <div class="section__header">
                <h2 class="text-title">Featured Groups</h2>
                <p class="text-subtitle">Discover thriving Nigerian communities around the world</p>
            </div>
            
            <div class="card-grid-modern">
                <% if (featuredGroups && featuredGroups.length > 0) { %>
                    <% featuredGroups.forEach(function(group, index) { %>
                        <div class="card group-card hover-lift fade-in">
                            <div class="card__body">
                                <div class="flex items-center gap-4 mb-4">
                                    <div class="group-card__logo">
                                        <% 
                                        var logoPath;
                                        
                                        // Priority 1: User uploaded image
                                        if (group.logo_url && group.logo_url.trim()) {
                                            logoPath = group.logo_url;
                                        } else {
                                            // Priority 2: Fallback to themed stock photos
                                            var logoNum = ((parseInt(group.id) % 5) + 1);
                                            
                                            if (group.name && (group.name.includes('Church') || group.name.includes('Christian') || group.name.includes('Christ') || group.name.includes('Redeemed') || group.name.includes('Living Faith') || group.name.includes('Mountain of Fire'))) {
                                                // Church photos - spiritual/architectural themes
                                                var churchPhotos = [
                                                    'https://picsum.photos/id/75/400/400',   // Architecture/building
                                                    'https://picsum.photos/id/582/400/400',  // Interior/peaceful
                                                    'https://picsum.photos/id/665/400/400',  // Light/spiritual
                                                    'https://picsum.photos/id/127/400/400',  // Gothic architecture
                                                    'https://picsum.photos/id/250/400/400'   // Serene/contemplative
                                                ];
                                                logoPath = churchPhotos[logoNum - 1];
                                            } else if (group.name && (group.name.includes('University') || group.name.includes('Alumni') || group.name.includes('College') || group.name.includes('School'))) {
                                                // School photos - educational/academic themes
                                                var schoolPhotos = [
                                                    'https://picsum.photos/id/159/400/400',  // Books/study
                                                    'https://picsum.photos/id/175/400/400',  // Library/learning
                                                    'https://picsum.photos/id/324/400/400',  // Academic building
                                                    'https://picsum.photos/id/590/400/400',  // Graduation/achievement
                                                    'https://picsum.photos/id/1/400/400'     // Classic academic
                                                ];
                                                logoPath = schoolPhotos[logoNum - 1];
                                            } else {
                                                // Organization photos - community/business themes
                                                var orgPhotos = [
                                                    'https://picsum.photos/id/3/400/400',    // Professional/business
                                                    'https://picsum.photos/id/7/400/400',    // Group/community
                                                    'https://picsum.photos/id/15/400/400',   // Collaboration
                                                    'https://picsum.photos/id/25/400/400',   // Modern/corporate
                                                    'https://picsum.photos/id/29/400/400'    // People/networking
                                                ];
                                                logoPath = orgPhotos[logoNum - 1];
                                            }
                                        }
                                        %>
                                        <img src="<%= logoPath %>" alt="<%= group.name %> logo" style="width: 60px; height: 60px; border-radius: 8px; object-fit: cover;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                        <div style="width: 60px; height: 60px; border-radius: 8px; background: var(--gradient-accent); display: none; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem;">
                                            <%= group.name ? group.name.charAt(0).toUpperCase() : 'G' %>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="status-dot status-dot--active"></span>
                                            <span class="chip chip--success">Active</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <h3 class="group-card__title"><%= group.name %></h3>
                                <p class="group-card__description">
                                    <%= group.description ? group.description.substring(0, 120) + '...' : 'No description available.' %>
                                </p>
                                
                                <div class="group-card__tags">
                                    <% if (group.city || group.country) { %>
                                        <span class="chip">📍 <%= group.city || group.country %></span>
                                    <% } %>
                                    <% if (group.categories && group.categories.length > 0) { %>
                                        <span class="chip chip--primary"><%= group.categories[0] %></span>
                                    <% } %>
                                </div>
                            </div>
                            <div class="card__footer">
                                <a href="/groups/<%= group.slug %>" class="btn btn--tech">
                                    View Details
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8.636 3.5a.5.5 0 0 0-.5.5v2h-3a.5.5 0 0 0 0 1h3v2a.5.5 0 0 0 .854.353l2.5-2.5a.5.5 0 0 0 0-.707l-2.5-2.5A.5.5 0 0 0 8.636 3.5z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="notification-card">
                        <h3>No Featured Groups Available</h3>
                        <p class="text-subtitle">Check back soon for exciting community updates!</p>
                    </div>
                <% } %>
            </div>
            
            <!-- Sidebar Ad Slots -->
            <div class="ad-sidebar">
                <div class="ad-container ad-container--sidebar">
                    <div class="ad-slot ad-slot--300x250">
                        <div class="ad-placeholder">
                            <span>Advertisement</span>
                            <small>300x250</small>
                        </div>
                    </div>
                </div>
                
                <div class="ad-container ad-container--sidebar mt-6">
                    <div class="ad-slot ad-slot--250x250">
                        <div class="ad-placeholder">
                            <span>Advertisement</span>
                            <small>250x250</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nigerian News Section -->
        <section class="section">
            <div class="section__header">
                <h2 class="text-title">Latest Nigerian News</h2>
                <p class="text-subtitle">Stay updated with news from Nigeria and the diaspora community</p>
            </div>
            
            <div class="news-grid">
                <% if (newsArticles && newsArticles.length > 0) { %>
                    <% newsArticles.forEach(function(article, index) { %>
                        <article class="news-card hover-lift fade-in">
                            <div class="news-card__header">
                                <span class="news-card__source"><%= article.source %></span>
                                <time class="news-card__time"><%= new Date(article.publishedAt).toLocaleDateString('en-US', {
                                    month: 'short',
                                    day: 'numeric',
                                    hour: '2-digit',
                                    minute: '2-digit'
                                }) %></time>
                            </div>
                            
                            <h3 class="news-card__title">
                                <a href="<%= article.url %>" target="_blank" rel="noopener noreferrer">
                                    <%= article.title %>
                                </a>
                            </h3>
                            
                            <p class="news-card__summary"><%= article.summary %></p>
                            
                            <div class="news-card__footer">
                                <a href="<%= article.url %>" target="_blank" rel="noopener noreferrer" class="news-card__link">
                                    Read More
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8.636 3.5a.5.5 0 0 0-.5.5v2h-3a.5.5 0 0 0 0 1h3v2a.5.5 0 0 0 .854.353l2.5-2.5a.5.5 0 0 0 0-.707l-2.5-2.5A.5.5 0 0 0 8.636 3.5z"/>
                                    </svg>
                                </a>
                            </div>
                        </article>
                    <% }); %>
                <% } else { %>
                    <div class="notification-card">
                        <h3>📰 News Currently Unavailable</h3>
                        <p class="text-subtitle">We're working to bring you the latest Nigerian news. Check back soon!</p>
                    </div>
                <% } %>
            </div>
            
            <div class="text-center mt-6">
                <a href="https://ngex.com" target="_blank" rel="noopener noreferrer" class="btn btn--outline">
                    View All News
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
                    </svg>
                </a>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="section">
            <div class="text-center mb-8">
                <h2 class="text-title mb-4">Frequently Asked Questions</h2>
                <p class="text-subtitle">Get answers to common questions about Naija Groups Directory</p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <div class="faq-container">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>What is Naija Groups Directory?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Naija Groups Directory is a comprehensive platform that connects Nigerian diaspora communities worldwide. We help you discover and connect with Nigerian organizations, churches, cultural groups, professional associations, and social clubs in your area.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>How do I find groups near me?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Simply use our search function and click the "Near Me" button to automatically find groups in your area. You can also search by city name (e.g., "church in London" or "professional groups in Houston"). Our intelligent search system will show you the most relevant groups based on your location.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>How can I add my group to the directory?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Click the "Add Your Group" button at the top of the page or in the menu. Fill out the simple form with your group's details, upload a logo if you have one, and submit. Your group will be reviewed and published within 24-48 hours.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>Is it free to list my group?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Yes! It's completely free to list your Nigerian diaspora group in our directory. Our mission is to help connect Nigerian communities worldwide at no cost to group leaders.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>What types of groups can be listed?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>We welcome all legitimate Nigerian diaspora organizations including churches, mosques, cultural associations, professional groups, student organizations, social clubs, business networks, sports teams, and community organizations. Groups must be non-profit or community-focused.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>How do I contact a group?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Each group profile shows their contact information including phone number, email, website, and WhatsApp (when available). You can click on phone numbers to call directly, or use the contact form to send a secure message to the group leaders.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            <span>Can I update my group's information?</span>
                            <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Absolutely! Contact us through the contact page with your updated information, and we'll help you keep your group's listing current. This includes updating contact details, meeting times, descriptions, and photos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ad Slot - Leaderboard (728x90) -->
        <section class="section">
            <div class="ad-container ad-container--leaderboard">
                <div class="ad-slot ad-slot--728x90">
                    <div class="ad-placeholder">
                        <span>Advertisement</span>
                        <small>728x90</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action Section -->
        <section class="section">
            <div class="notification-card text-center">
                <h2 class="text-title mb-4">Ready to Connect Your Community?</h2>
                <p class="text-subtitle mb-6">Join our growing network of Nigerian diaspora groups and help build stronger communities worldwide.</p>
                
                <div class="flex gap-4 justify-center items-center">
                    <a href="/add-group" class="btn btn--tech">
                        Add Your Group
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                        </svg>
                    </a>
                    <a href="/search" class="btn btn--outline">Browse All Groups</a>
                </div>
                
                <div class="progress-bar mt-6">
                    <div class="progress-bar__fill" style="width: 65%;"></div>
                </div>
                <p class="text-sm text-light mt-2">65% of target communities reached</p>
            </div>
        </section>
    </main>
    
    <!-- Floating Action Button -->
    <button class="fab" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" title="Back to top">
        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"/>
        </svg>
    </button>

    <%- include('partials/footer') %>
    
    <style>
        /* FAQ Styles */
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .faq-item {
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-lg);
            margin-bottom: 1rem;
            overflow: hidden;
            background: white;
            box-shadow: var(--shadow-sm);
        }
        
        .faq-question {
            width: 100%;
            padding: 1.5rem;
            background: none;
            border: none;
            text-align: left;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-text);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .faq-question:hover {
            background-color: var(--color-bg-alt);
            color: var(--color-primary-600);
        }
        
        .faq-icon {
            transition: transform 0.3s ease;
            flex-shrink: 0;
            margin-left: 1rem;
        }
        
        .faq-item.active .faq-icon {
            transform: rotate(45deg);
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            background-color: var(--color-bg-alt);
        }
        
        .faq-item.active .faq-answer {
            max-height: 500px;
            padding: 1.5rem;
        }
        
        .faq-answer p {
            margin: 0;
            color: var(--color-text-light);
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .faq-question {
                padding: 1rem;
                font-size: 1rem;
            }
            
            .faq-item.active .faq-answer {
                padding: 1rem;
            }
        }
    </style>
    
    <script>
        function toggleFAQ(element) {
            const faqItem = element.parentNode;
            const isActive = faqItem.classList.contains('active');
            
            // Close all FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Open clicked item if it wasn't active
            if (!isActive) {
                faqItem.classList.add('active');
            }
        }
        
        // Add keyboard navigation
        document.addEventListener('DOMContentLoaded', function() {
            const faqButtons = document.querySelectorAll('.faq-question');
            
            faqButtons.forEach(button => {
                button.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleFAQ(this);
                    }
                });
            });
        });
    </script>
</body>
</html>